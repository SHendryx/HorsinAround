<%
    // Using the lastVisit date from the database, calculate the time since the last visit
    // Set a color gradient based on the following criteria:
    // lastVisit < 6 weeks (42 days) = green
    // 6 weeks (42 days) < lastVisit < 8 weeks (56 days) = yellow
    // lastVisit >= 8 weeks (56 days) = red
    getHex = function(days, rangeStart, rangeEnd, endValue){
      let normalizedDays = ((days - rangeStart)/(rangeEnd - rangeStart))
      if (endValue === 1){
        // Puts the normalizedDays on the scale from 0-255 in hex
        normalizedDays *= 255
      } else{
        // Puts the normalizedDays on the scale from 255-0 in hex
        normalizedDays = (1 - normalizedDays) * 255
      }
      // Returns the normalizedDays in hex
      normalizedDays = Math.floor(normalizedDays)
      let hexString = normalizedDays.toString(16)
      if (hexString.length < 2){
        hexString = '0' + hexString
      }
      return hexString
    }

    getDecimal = function(days, rangeStart, rangeEnd, endValue){
      let normalizedDays = ((days - rangeStart)/(rangeEnd - rangeStart))
      console.log("======================")
      console.log("Days Since Last Visit: " + days)
      console.log("Range Start: " + rangeStart)
      console.log("Range End: " + rangeEnd)
      console.log("End Value: " + endValue)
      console.log("Normalized Days: " + normalizedDays)
      if (endValue === 1){
        // Puts the normalizedDays on the scale from 0-255 in hex
        normalizedDays *= 255
      } else{
        // Puts the normalizedDays on the scale from 255-0 in hex
        normalizedDays = (1.0 - normalizedDays) * 255
      }
      normalizedDays = Math.floor(normalizedDays)
      return normalizedDays
    }

%>